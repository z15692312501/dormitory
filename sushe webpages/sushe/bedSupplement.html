<!DOCTYPE html>
<!--
BeyondAdmin - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.2.0
Version: 1.0.0
Purchase: http://wrapbootstrap.com
-->

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Head -->

<head>
    <meta charset="utf-8" />
    <title>宿舍管理系统</title>

    <meta name="description" content="data tables" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="shortcut icon" href="assets/img/favicon.png" type="image/x-icon">

    <!--Basic Styles-->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link id="bootstrap-rtl-link" href="" rel="stylesheet" />
    <link href="assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="assets/css/weather-icons.min.css" rel="stylesheet" />

    <!--Fonts-->
    <!-- <link href="http://fonts.useso.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300" rel="stylesheet" type="text/css"> -->

    <!--Beyond styles-->
    <link id="beyond-link" href="assets/css/beyond.min.css" rel="stylesheet" />
    <link href="assets/css/demo.min.css" rel="stylesheet" />
    <link href="assets/css/typicons.min.css" rel="stylesheet" />
    <link href="assets/css/animate.min.css" rel="stylesheet" />
    <link id="skin-link" href="" rel="stylesheet" type="text/css" />

    <!--Page Related styles-->
    <link href="assets/css/dataTables.bootstrap.css" rel="stylesheet" />

    <!--Skin Script: Place this script in head to load scripts for skins and rtl support-->
    <script src="assets/js/skins.min.js"></script>
</head>
<!-- /Head -->
<!-- Body -->

<body>
    <!-- Loading Container -->
    <div class="loading-container">
        <div class="loading-progress">
            <div class="rotator">
                <div class="rotator">
                    <div class="rotator colored">
                        <div class="rotator">
                            <div class="rotator colored">
                                <div class="rotator colored"></div>
                                <div class="rotator"></div>
                            </div>
                            <div class="rotator colored"></div>
                        </div>
                        <div class="rotator"></div>
                    </div>
                    <div class="rotator"></div>
                </div>
                <div class="rotator"></div>
            </div>
            <div class="rotator"></div>
        </div>
    </div>
    <!--  /Loading Container -->
    <!-- Navbar -->
    <div class="navbar">
        <div class="navbar-inner">
            <div class="navbar-container">
                <!-- Navbar Barnd -->
                <div class="navbar-header pull-left">
                    <a href="index.html" class="navbar-brand">
                        <div style="margin-top: 10px">
                            <strong>宿舍管理系统</strong>
                        </div>
                    </a>
                </div>
                <div class="navbar-header pull-right" style="text-align:right">
                    <a href="login.html" class="btn" style="margin: 4px 20px 2px 0px; color:red; border-color: red">注销</a>
                </div>
                <!-- /Navbar Barnd -->
                <!-- Sidebar Collapse -->
                <div class="sidebar-collapse" id="sidebar-collapse">
                    <i class="collapse-icon fa fa-bars"></i>
                </div>
                <!-- /Sidebar Collapse -->
            </div>
        </div>
    </div>
    <!-- /Navbar -->
    <!-- Main Container -->
    <div class="main-container container-fluid">
        <!-- Page Container -->
        <div class="page-container">
            <!-- Page Sidebar -->
            <div class="page-sidebar" id="sidebar">
                <!-- Sidebar Menu -->
                <ul class="nav sidebar-menu">
                    <!-- 添加床位 -->
                    <li>
                        <a href="bedSupplement.html">
                            <i class="menu-icon glyphicon glyphicon-home"></i>
                            <span class="menu-text"> 床位补充 </span>
                        </a>
                    </li>
                    <!--学生信息补充-->
                    <li>
                        <a href="studentSupplement.html">
                            <i class="menu-icon glyphicon glyphicon-home"></i>
                            <span class="menu-text"> 学生信息补充 </span>
                        </a>
                    </li>
                </ul>
                <!-- /Sidebar Menu -->
            </div>
            <!-- /Page Sidebar -->
            <!-- Page Content -->
            <div class="page-content">
                <!-- Page Header -->
                <div class="page-header position-relative">
                    <div class="header-title">
                        <h1>
                            学生自助补充
                        </h1>
                    </div>
                    <!--Header Buttons-->
                    <div class="header-buttons">
                        <a class="sidebar-toggler" href="#">
                            <i class="fa fa-arrows-h"></i>
                        </a>
                        <a class="refresh" id="refresh-toggler" href="">
                            <i class="glyphicon glyphicon-refresh"></i>
                        </a>
                        <a class="fullscreen" id="fullscreen-toggler" href="#">
                            <i class="glyphicon glyphicon-fullscreen"></i>
                        </a>
                    </div>
                    <!--Header Buttons End-->
                </div>
                <!-- /Page Header -->
                <!-- Page Body -->
                <div class="page-body">
                    <div class="container">
                        <div class="row">
                            <div class="widget">
                                <div class="widget-header bordered-bottom bordered-blue">
                                    <span class="widget-caption">床位补充</span>
                                </div>
                                <div class="widget-body">
                                    <form role="form" readonly="readonly">
                                        <div class="container">
                                            <div class="col-sm-12 col-md-4 col-lg-4">
                                                <div class="form-group">
                                                    <label for="exampleInputEmail1">楼号</label>
                                                    <select onchange="requestDorm()" id="e1" style="width: 100%;height: 34px;">
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-4 col-lg-4">
                                                <div class="form-group">
                                                    <label for="exampleInputEmail1">层号</label>
                                                    <select onchange="requestDorm()" id="e2" style="width: 100%;height: 34px;">
                                                        <option value="1">1层</option>
                                                        <option value="2">2层</option>
                                                        <option value="3">3层</option>
                                                        <option value="4">4层</option>
                                                        <option value="5">5层</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-4 col-lg-4">
                                                <div class="form-group">
                                                    <label for="exampleInputEmail1">宿舍号</label>
                                                    <select id="e3" style="width: 100%;height: 34px;">

                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-4 col-lg-4">
                                                <div class="form-group">
                                                    <label for="exampleInputEmail1">床位号</label>
                                                    <select id="bed_name" style="width: 100%;height: 34px;">
                                                        <option value="1">A1</option>
                                                        <option value="2">A2</option>
                                                        <option value="3">B1</option>
                                                        <option value="4">B2</option>
                                                        <option value="5">C1</option>
                                                        <option value="6">C2</option>
                                                        <option value="7">D1</option>
                                                        <option value="8">D2</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <button onclick="postdata()" type="button" class="btn btn-blue">保存</button>
                                    </form>
                                </div>
                            </div>
                            <!-- 纳新广告 -->
                            <div>
                                <div style="float:left">
                                    <img src="assets/img/jsjLogo.jpg" alt="计算机协会logo" style="width: 120px;height: 120px;">
                                    <img src="assets/img/jsjQun.jpg" alt="计算机纳新群二维码" style="width: 90px;height: 120px;">
                                </div>
                                <div style="float:left;padding: 5px 0px 0px 10px">
                                    宿舍管理系统由<a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=8243001082db36ee7828eb8b6a8f696638037a6d97c02572d7042582eb9e22b3">计算机协会软件开发工作室</a>开发<br />
                                    2018级计算机协会纳新群：<a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=8243001082db36ee7828eb8b6a8f696638037a6d97c02572d7042582eb9e22b3">758579526</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /Page Body -->
            </div>
            <!-- /Page Content -->
        </div>
        <!-- /Page Container -->
        <!-- Main Container -->

    </div>

    <!--Basic Scripts-->
    <script src="assets/js/jquery-2.0.3.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>

    <!--Beyond Scripts-->
    <script src="assets/js/beyond.min.js"></script>

    <!--Page Related Scripts-->
    <script src="assets/js/datatable/jquery.dataTables.min.js"></script>
    <script src="assets/js/datatable/ZeroClipboard.js"></script>
    <script src="assets/js/datatable/dataTables.tableTools.min.js"></script>
    <script src="assets/js/datatable/dataTables.bootstrap.min.js"></script>
    <script src="assets/js/datatable/datatables-init.js"></script>
    <script>
        InitiateSimpleDataTable.init();
        InitiateEditableDataTable.init();
        InitiateExpandableDataTable.init();
        InitiateSearchableDataTable.init();
    </script>
    <!--Jquery Select2-->
    <script src="assets/js/select2/select2.js"></script>
    <!--Bootstrap Tags Input-->
    <script src="assets/js/tagsinput/bootstrap-tagsinput.js"></script>

    <!--Bootstrap Date Picker-->
    <script src="assets/js/datetime/bootstrap-datepicker.js"></script>

    <!--Bootstrap Time Picker-->
    <script src="assets/js/datetime/bootstrap-timepicker.js"></script>

    <!--Bootstrap Date Range Picker-->
    <script src="assets/js/datetime/moment.js"></script>
    <script src="assets/js/datetime/daterangepicker.js"></script>

    <!--Jquery Autosize-->
    <script src="assets/js/textarea/jquery.autosize.js"></script>

    <!--Fuelux Spinner-->
    <script src="assets/js/fuelux/spinner/fuelux.spinner.min.js"></script>

    <!--jQUery MiniColors-->
    <script src="assets/js/colorpicker/jquery.minicolors.js"></script>

    <!--jQUery Knob-->
    <script src="assets/js/knob/jquery.knob.js"></script>

    <!--noUiSlider-->
    <script src="assets/js/slider/jquery.nouislider.js"></script>

    <!--jQRangeSlider-->
    <script src="assets/js/jquery-ui-1.10.4.custom.js"></script>
    <script src="assets/js/slider/jQRangeSlider/jQAllRangeSliders-withRuler-min.js"></script>


    <script>
        //--Jquery Select2--


        //--Bootstrap Date Picker--
        $('.date-picker').datepicker();

        //--Bootstrap Time Picker--
        $('#timepicker1').timepicker();

        //--Bootstrap Date Range Picker--
        $('#reservation').daterangepicker();

        //--JQuery Autosize--
        $('#textareaanimated').autosize({ append: "\n" });

        //--Fuelux Spinner--
        $('.spinner').spinner();


        //--jQuery MiniColors--
        $('.colorpicker').each(function () {
            $(this).minicolors({
                control: $(this).attr('data-control') || 'hue',
                defaultValue: $(this).attr('data-defaultValue') || '',
                inline: $(this).attr('data-inline') === 'true',
                letterCase: $(this).attr('data-letterCase') || 'lowercase',
                opacity: $(this).attr('data-opacity'),
                position: $(this).attr('data-position') || 'bottom left',
                change: function (hex, opacity) {
                    if (!hex) return;
                    if (opacity) hex += ', ' + opacity;
                    try {
                        console.log(hex);
                    } catch (e) { }
                },
                theme: 'bootstrap'
            });

        });


        //---Jquery Knob--
        $(".knob").knob();


        //---noUiSlider--
        $("#sample-minimal").noUiSlider({
            range: [0, 100],
            start: [20, 80],
            connect: true,
            serialization: {
                mark: ',',
                resolution: 0.1,
                to: [[$("#minimal-label1"), 'html'],
                [$('#minimal-label2'), 'html']]
            }
        });

        $("#sample-onehandle").noUiSlider({
            range: [20, 100],
            start: 40,
            step: 20,
            handles: 1,
            connect: "lower",
            serialization: {
                to: [$("#low"), 'html']
            }
        });
        $("#sample-onehandle-upper").noUiSlider({
            range: [20, 100],
            start: 70,
            step: 20,
            handles: 1,
            connect: "upper",
            serialization: {
                to: [$("#low"), 'html']
            }
        });
        $('.slider').noUiSlider({
            range: [0, 255],
            start: 127,
            handles: 1,
            connect: "lower",
            orientation: "vertical",
            serialization: {
                resolution: 1
            }
            , slide: function () {

                var color = 'rgb(' + $("#red").val()
                    + ',' + $("#green").val()
                    + ',' + $("#blue").val()
                    + ')';

                $(".result").css({
                    background: color
                    , color: color
                });
            }
        });

        $(".sized-slider").noUiSlider({
            range: [0, 100],
            start: 50,
            handles: 1,
            connect: "lower",
            serialization: {
                to: [$("#low"), 'html']
            }
        });

        $(".colored-slider").noUiSlider({
            range: [0, 100],
            start: 30,
            handles: 1,
            connect: "lower",
            serialization: {
                to: [$("#low"), 'html']
            }
        });

        //--jQRangeSlider--
        $(".sized-rangeslider").rangeSlider();
        $(".colored-rangeslider").rangeSlider();
        $("#rangeslider").rangeSlider();
        $("#editrangeslider").editRangeSlider();
        $("#daterangeslider").dateRangeSlider();
        $("#noarrowsrangeslider").rangeSlider({ arrows: false });
        $("#boundsrangeslider").rangeSlider({ bounds: { min: 10, max: 90 } });
        $("#dvrangeslider").rangeSlider({ defaultValues: { min: 13, max: 66 } });
        $("#delayrangeslider").rangeSlider({ valueLabels: "change", delayOut: 4000 });
        $("#durationrangeslider").rangeSlider({ valueLabels: "change", durationIn: 1000, durationOut: 1000 });
        $("#disabledrangeslider").rangeSlider({ enabled: false });
        $("#steprangeslider").rangeSlider({ step: 10 });
        $("#labelsrangeslider").rangeSlider({ valueLabels: "hide" });
        $("#simlescalesrangeslider").rangeSlider({
            scales: [
                // Primary scale
                {
                    first: function (val) { return val; },
                    next: function (val) { return val + 10; },
                    stop: function (val) { return false; },
                    label: function (val) { return val; },
                    format: function (tickContainer, tickStart, tickEnd) {
                        tickContainer.addClass("myCustomClass");
                    }
                },
                // Secondary scale
                {
                    first: function (val) { return val; },
                    next: function (val) {
                        if (val % 10 === 9) {
                            return val + 2;
                        }
                        return val + 1;
                    },
                    stop: function (val) { return false; },
                    label: function () { return null; }
                }]
        });
        var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"];
        $("#dateRulersExample").dateRangeSlider({
            bounds: { min: new Date(2012, 0, 1), max: new Date(2012, 11, 31, 12, 59, 59) },
            defaultValues: { min: new Date(2012, 1, 10), max: new Date(2012, 4, 22) },
            scales: [{
                first: function (value) { return value; },
                end: function (value) { return value; },
                next: function (value) {
                    var next = new Date(value);
                    return new Date(next.setMonth(value.getMonth() + 1));
                },
                label: function (value) {
                    return months[value.getMonth()];
                },
                format: function (tickContainer, tickStart, tickEnd) {
                    tickContainer.addClass("myCustomClass");
                }
            }]
        });
    </script>

    <!--Google Analytics::Demo Only-->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'http://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-52103994-1', 'auto');
        ga('send', 'pageview');

    </script>
    <!--Google Analytics::Demo Only-->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'http://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-52103994-1', 'auto');
        ga('send', 'pageview');

    </script>
    <style>
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
        }

        input[type="number"] {
            -moz-appearance: textfield;
        }
    </style>
    <script src="assets/js/delDoc_bedTransform.js"></script>
    <script>
        var sid = localStorage.getItem("sid");
        var badId = document.URL.split('?')[1];
        console.log(sid);
        // 请求数据
        $.ajax({
            url: "http://122.114.248.119/dormitory/public/index.php/api/studentx/bedadd/sid/" + sid,
            type: 'get',
            success: function (data) {
                console.log(data)
                // 循环赋值
                var sel = document.getElementById("e1");
                for (var i = 0; i < data.data.length; i++) {
                    var opt = new Option(data.data[i].build_name, data.data[i].id);
                    sel.options.add(opt);
                };
                $.ajax({
                    url: 'http://122.114.248.119/dormitory/public/index.php/api/studentx/sxchildres/buildid/' + data.data[0].id + '/lcid/' + document.getElementById("e2").value + '/sid/' + sid,
                    type: 'get',
                    async: false,
                    success: function (data) {
                        console.log(data);
                        var doc = document.getElementById('e3')
                        document.getElementById('e3').innerText = " "
                        for (var s = 0; s < data.data.length; s++) {
                            var opt = new Option(data.data[s].dorm_name, data.data[s].id);
                            doc.options.add(opt);
                        }
                    },
                    error: function (error) {
                        console.log(error)
                    }
                })
            },
            error: function (error) {
                console.log(error)
                alert(error.msg)
            }
        })

        function requestDorm() {
            var docId = event.target.value;
            console.log(docId);
            $.ajax({
                url: 'http://122.114.248.119/dormitory/public/index.php/api/studentx/sxchildres/buildid/' + document.getElementById("e1").value + '/lcid/' + document.getElementById("e2").value + '/sid/' + sid,
                type: 'get',
                async: false,
                success: function (data) {
                    console.log(data);
                    var doc = document.getElementById('e3')
                    document.getElementById('e3').innerText = " "
                    for (var s = 0; s < data.data.length; s++) {
                        var opt = new Option(data.data[s].dorm_name, data.data[s].id);
                        doc.options.add(opt);
                    }
                    // document.getElementById('e3').value = d_id
                },
                error: function (error) {
                    console.log(error)
                }
            })
        }

        // 修改
        function postdata() {
            // 获取
            var bed_name = $("#bed_name").val()
            var build_id = $("#e1").val()
            var dorm_id = $("#e3").val()
            var student_id = sid
            var postdata = { "bed_name": bed_name, "student_id": student_id, build_id: build_id, dorm_id: dorm_id }

            $.ajax({
                url: "http://122.114.248.119/dormitory/public/index.php/api/studentx/bedadd/sid/" + sid,
                type: 'post',
                contentType: "application/json;charset=utf-8",
                data: JSON.stringify(postdata),
                success: function (data) {
                    console.log(data)
                    alert(data.msg)
                },
                error: function (error) {
                    console.log(error)
                    alert(data.msg)
                }
            })
        }
    </script>

</body>
<!--  /Body -->

</html>